# =============================================================================
# OSMO on Nebius - Terraform Variables
# =============================================================================
# Copy this file to terraform.tfvars and customize for your deployment.
# =============================================================================

# -----------------------------------------------------------------------------
# Required Settings
# -----------------------------------------------------------------------------
# Get these from: source ../000-prerequisites/nebius-env-init.sh

tenant_id = "your-tenant-id"  # From NEBIUS_TENANT_ID
parent_id = "your-project-id" # From NEBIUS_PROJECT_ID

# -----------------------------------------------------------------------------
# Environment Settings
# -----------------------------------------------------------------------------
region       = "eu-north1"    # or eu-west1
environment  = "dev"          # dev, staging, prod
project_name = "osmo"         # Used for resource naming

# -----------------------------------------------------------------------------
# Kubernetes Cluster
# -----------------------------------------------------------------------------
k8s_version            = null  # null for latest
etcd_cluster_size      = 3     # 1, 3, or 5
enable_public_endpoint = true  # Set false if using WireGuard

# -----------------------------------------------------------------------------
# CPU Node Group
# -----------------------------------------------------------------------------
cpu_nodes_count            = 3
cpu_nodes_platform         = "cpu-d3"
cpu_nodes_preset           = "16vcpu-64gb"
cpu_disk_size_gib          = 128
cpu_nodes_assign_public_ip = false  # Private nodes only

# -----------------------------------------------------------------------------
# GPU Node Group
# -----------------------------------------------------------------------------
gpu_nodes_count_per_group  = 1
gpu_node_groups            = 1
gpu_nodes_platform         = "gpu-h100-sxm"  # or gpu-h200-sxm
gpu_nodes_preset           = "8gpu-128vcpu-1600gb"
gpu_disk_size_gib          = 1023
gpu_nodes_assign_public_ip = false  # Private nodes only
enable_gpu_cluster         = true   # InfiniBand
enable_gpu_taints          = true
gpu_nodes_preemptible      = false  # Preemptible requires project permissions

# -----------------------------------------------------------------------------
# Storage
# -----------------------------------------------------------------------------
enable_filestore   = true
filestore_size_gib = 1024

# -----------------------------------------------------------------------------
# PostgreSQL (Nebius Managed Service)
# -----------------------------------------------------------------------------
# Platform depends on region: cpu-d3 (eu-west1), cpu-e2 (eu-north1)
postgresql_platform      = "cpu-e2"       # Adjust for your region
postgresql_preset        = "2vcpu-8gb"    # 2/4/8/16 vcpu options available
postgresql_disk_type     = "network-ssd"  # network-ssd (eu-north1), nbs-csi-sc (eu-west1)
postgresql_disk_size_gib = 50
postgresql_host_count    = 1

# -----------------------------------------------------------------------------
# WireGuard VPN (Optional)
# -----------------------------------------------------------------------------
enable_wireguard = false
# wireguard_port   = 51820
# wireguard_ui_port = 5000
